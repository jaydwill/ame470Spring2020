<html>

<head>
  <script src='asyncReq.js'> </script>

  <script>
    function addFeed(){
      var a = document.getElementById("valA").value;
      var url = "./addfeed?a=" + encodeURIComponent(a);
      loadFile(url, function(data){
        getAllFeeds();
      });
    }

    function start(){
      getAllFeeds();
    }

    allFeeds = [];
    function getAllFeeds(){
      loadFile("./getallfeeds", function(data){
        allFeeds = JSON.parse(data);
        var markup = "";
        for(var i = 0; i < allFeeds.length; i++){
          markup = markup + "<button onclick='feedSelected("+ i + ")'>" + allFeeds[i] + "</button>";
        }
        document.getElementById("feedList").innerHTML = markup;
      })
    }


    function feedSelected(index)
    {
      var url = allFeeds[index];
      loadFile("./getrss?a=" + url, function(data){
      });
    }
  </script>
        document.getElementById("currFeedList").innerHTML = data;
</head>

<body onload='start()'>

<div id='feedList'></div>
<div id='currFeedList'></div>
<div id='feedDetails'></div>


  <textarea id='valA'></textarea>
  <button onclick='addFeed()'> Add Feed </button>

  <div id='result'> </div>'
</body>

</html>
